<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SrdieÄko pre lucku</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
    background-color: #111;
  }
  canvas {
    display: block;
    width: 100vw;
    height: 100vh;
  }
  .btn {
    position: absolute;
    bottom: 6%;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 24px;
    font-size: 1.5rem;
    border: none;
    border-radius: 10px;
    background-color: #e63946;
    color: white;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    transition: background-color 0.3s, transform 0.2s;
    max-width: 300px;
    text-align: center;
  }
  .btn:hover {
    background-color: #c1121f;
    transform: translateX(-50%) scale(1.05);
  }
</style>
</head>
<body>

<canvas id="canvas"></canvas>
<button id="startBtn" class="btn">ğŸ’– Spusti animÃ¡ciu</button>
<button id="changeBtn" class="btn" style="display:none;">ğŸ”„ ZmeniÅ¥ text</button>
<button id="restartBtn" class="btn" style="display:none;">ğŸ” Spusti odznova</button>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const startBtn = document.getElementById("startBtn");
const changeBtn = document.getElementById("changeBtn");
const restartBtn = document.getElementById("restartBtn");

// texty
let texts = [
  "Toto srdieÄko patrÃ­ niekomu vÃ½nimoÄnÃ©mu",
  [ // ÄasÅ¥ 1
    "Lucka, patrÃ­ tebe.",
    "Nikdy som si ani vo sne nepredstavoval,",
    "Å¾e budem maÅ¥ raz takÃ© ÃºÅ¾asnÃ© dievÄa, ako si ty.",
    "Doteraz si pamÃ¤tÃ¡m naÅ¡e prvÃ© stretnutie, keÄ si ma",
    "oÄarila tÃ½m rainbow flickom, Äo si vtedy spravila na ihrisku.",
    "UÅ¾ vtedy som vravel Dominovi, Å¾e tÃ¡ Lucka je super,",
    "Äo mi aj potvrdil. A keÄ mi v septembri Domino napÃ­sal:",
    "â€PoÄ von, beriem Lily a prÃ­de aj Lucka,â€œ tak som sa kus zÄ¾akol,",
    "Äi neprÃ­de Majorka. Ale keÄ som Å¥a videl, bol som straÅ¡ne rÃ¡d."
  ],
  [ // ÄasÅ¥ 2
    "Som straÅ¡ne rÃ¡d, Å¾e sa vÅ¡etko stalo tak, ako sa stalo,",
    "a hlavne Å¾e som ti vtedy zobral telefÃ³n a spravil fotky,",
    "lebo inak by som sa asi nikdy neodvÃ¡Å¾il ti napÃ­saÅ¥.",
    "Ten deÅˆ, keÄ som iÅ¡iel po teba na motorke, som sa modlil,",
    "nech ti nie je zima a aby sa ti to pÃ¡Äilo. Som rÃ¡d, Å¾e sa pÃ¡Äilo.",
    "A nÃ¡Å¡ date na hrade? To bol najlepÅ¡Ã­, akÃ½ som kedy mal.",
    "A potom na chate uÅ¾ vtedy som vedel, Å¾e Å¥a chcem,",
    "Å¾e ty si tÃ¡ pravÃ¡."
  ],
  [ // ÄasÅ¥ 3
    "NeÄ¾utujem niÄ, Äo sa stalo. Som straÅ¡ne rÃ¡d,",
    "Å¾e prÃ¡ve ty si moja frajerka.",
    "Si ÃºÅ¾asnÃ¡, krÃ¡sna, vÃ½nimoÄnÃ¡ a jedineÄnÃ¡.",
    "A Ã¡no, aj stehnÃ¡ a cicky mÃ¡Å¡ fakt dobrÃ©.",
    "Proste si moja vysnÃ­vanÃ¡ frajerka.",
    "A viem, Å¾e niÄ krajÅ¡ie v Å¾ivote sa mi uÅ¾ nestane.",
    "Ä½Ãºbim Å¥a fest. A neboj, nikdy sa ma nezbavÃ­Å¡, aÅ¾ do staroby â¤ï¸"
  ]
];

// ğŸŒŸ ResponsÃ­vny canvas
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

// ğŸ”¹ Kreslenie srdieÄka
function kresliSrdiecko(callback) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.lineWidth = Math.max(canvas.width, canvas.height) / 200;
  ctx.strokeStyle = "#e63946";
  ctx.beginPath();

  let t = 0;
  const max = 2 * Math.PI;
  const step = 0.02;
  const scale = Math.min(canvas.width, canvas.height) / 25;

  const interval = setInterval(() => {
    let x = 16 * Math.pow(Math.sin(t), 3);
    let y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
    const drawX = canvas.width / 2 + x * scale;
    const drawY = canvas.height / 2 - y * scale;
    if (t === 0) ctx.moveTo(drawX, drawY);
    else ctx.lineTo(drawX, drawY);
    ctx.stroke();
    t += step;
    if (t > max) {
      clearInterval(interval);
      ctx.fillStyle = "#e63946";
      ctx.fill();
      if (callback) callback();
    }
  }, 20);
}

// ğŸ”¹ Funkcia pre pÃ­sanie textu po pÃ­smenkÃ¡ch
function typeTextByLetter(lines, callback, isCenter=false, smaller=false) {
  let fontSize = Math.floor(Math.min(canvas.width, canvas.height)/30);
  if(smaller) fontSize -= 3;
  ctx.font = `bold ${fontSize}px Courier New`;
  ctx.fillStyle = "white";
  ctx.textAlign = "left";
  ctx.textBaseline = "top";

  // ğŸ”¥ ROZDIELNE OFFSETY PRE PRVÃ TEXT A OSTATNÃ‰
  let offsetX, offsetY;

  if (isCenter) {
    // ğŸ”¸ prvÃ½ text
    offsetX = canvas.width / 2 - canvas.width * 0.3;
    offsetY = canvas.height / 2 - fontSize / 2;
  } else {
    // ğŸ”¸ vÅ¡etky ÄalÅ¡ie tri texty
    offsetX = canvas.width / 2 - Math.min(canvas.width, canvas.height) / 3.2-50;
    offsetY = canvas.height / 2 - Math.min(canvas.height, canvas.height) / 3 + 150; 
    // ak chceÅ¡ eÅ¡te niÅ¾Å¡ie/zmenÅ¡iÅ¥ â†’ uprav -50
  }

  let lineIndex = 0;
  let charIndex = 0;

  function drawNextChar() {
    if (lineIndex >= lines.length) {
      if (callback) callback();
      return;
    }

    const line = lines[lineIndex];
    ctx.fillText(
      line.charAt(charIndex),
      offsetX + charIndex * (fontSize * 0.55),
      offsetY + lineIndex * (fontSize + 5)
    );

    charIndex++;
    if (charIndex >= line.length) {
      charIndex = 0;
      lineIndex++;
    }
    setTimeout(drawNextChar, 35);
  }

  drawNextChar();
}

// ğŸ”¹ Reset animÃ¡cie
function resetAnimation() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  startBtn.style.display = "block";
  changeBtn.style.display = "none";
  restartBtn.style.display = "none";
}

// ğŸ”¹ Buttony a postupnÃ© zobrazovanie textu
let step = 0;

startBtn.addEventListener("click", () => {
  startBtn.style.display = "none";
  kresliSrdiecko(() => {
    typeTextByLetter([texts[0]], () => { changeBtn.style.display = "block"; }, true);
  });
});

changeBtn.addEventListener("click", () => {
  changeBtn.style.display = "none";
  step++;
  if(step < texts.length) {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    kresliSrdiecko(() => {
      typeTextByLetter(texts[step], () => {
        if(step === texts.length-1) restartBtn.style.display = "block";
        else changeBtn.style.display = "block";
      }, false, true);
    });
  }
});

restartBtn.addEventListener("click", () => {
  step = 0;
  resetAnimation();
});

// ğŸ”¹ Podpora dotykov
[startBtn, changeBtn, restartBtn].forEach(btn => {
  btn.addEventListener("touchstart", e => { e.preventDefault(); btn.click(); });
});
</script>
</body>
</html>







